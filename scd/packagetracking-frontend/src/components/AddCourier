<template>
  <v-dialog v-model="showDialog" max-width="400px" class="bg-transparent">
    <div class="dialogClass">
      Welcome, {{currentUser}}! Let's create a new courier!
      <v-textarea
          label="name"
          v-model="addCourier.name"
      ></v-textarea>
      <v-textarea
                label="email"
                v-model="addCourier.email"
      ></v-textarea>

<!--      TODO: add package details here-->

      <v-btn color="green" @click="createCourier">Create</v-btn>
      <v-btn color="red" @click="closeDialog">Cancel</v-btn>
    </div>
  </v-dialog>
</template>

<script>
import axios from 'axios';

export default {

  name: 'AddCourier',
  props: {
    currentUser: String
  },
  data() {
    return {
      showDialog: Boolean,
      addCourier: {
        name: "",
        email: ""
      }
    }
  },
  methods: {
    async createCourier() {
      try {
        const response = await axios.post('http://localhost:8083/package', this.addCourier)
        console.log("courier created successfully:", response.data);
        this.showDialog = false
      } catch (error) {
        console.error("Error creating package:", error);
      }
    },
    closeDialog() {
      this.showDialog = false;
      this.name = { name: "" };
      this.email={email:""}
    },
  }
};
</script>

<style scoped>
.dialogClass {
  padding: 20px;
  background-color: white;
}
</style>